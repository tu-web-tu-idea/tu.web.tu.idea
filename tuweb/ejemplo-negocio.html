<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tienda de Ropa - Moda Actual</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background: #f5f5f5;
    color: #333;
  }
  header {
    background: #222;
    color: white;
    padding: 20px;
    text-align: center;
    letter-spacing: 2px;
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  header h1 {
    margin: 0;
    font-weight: 700;
  }
  nav {
    background: #444;
    display: flex;
    justify-content: center;
    gap: 20px;
    position: sticky;
    top: 68px; /* altura header */
    z-index: 999;
  }
  nav a {
    color: white;
    text-decoration: none;
    padding: 15px 20px;
    display: inline-block;
    transition: background 0.3s ease;
    cursor: pointer;
  }
  nav a:hover, nav a.active {
    background: #d9534f;
  }
  .container {
    max-width: 1100px;
    margin: 30px auto 60px;
    padding: 0 15px;
  }
  section {
    margin-bottom: 50px;
    transition: opacity 0.3s ease;
  }
  section.hidden {
    display: none;
  }
  section h2 {
    border-bottom: 3px solid #222;
    padding-bottom: 10px;
    margin-bottom: 25px;
  }
  .productos {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 25px;
  }
  .producto {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    cursor: pointer;
  }
  .producto:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 15px rgb(0 0 0 / 0.2);
  }
  .producto img {
    width: 100%;
    height: 280px;
    object-fit: cover;
    display: block;
  }
  .info-producto {
    padding: 15px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .info-producto h3 {
    margin: 0 0 10px;
    font-size: 1.1rem;
    color: #222;
  }
  .info-producto p {
    font-size: 0.9rem;
    color: #555;
    margin: 0 0 15px;
    flex-grow: 1;
  }
  .precio {
    font-weight: 700;
    color: #d9534f;
    font-size: 1.2rem;
    margin-bottom: 10px;
  }
  button.add-cart {
    background: #d9534f;
    border: none;
    color: white;
    padding: 10px;
    font-weight: 700;
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.3s ease;
    align-self: start;
  }
  button.add-cart:hover {
    background: #b7403a;
  }
  footer {
    background: #222;
    color: white;
    text-align: center;
    padding: 15px;
    font-size: 0.9rem;
  }
  /* Carrito */
  #cart {
    position: fixed;
    top: 70px;
    right: 20px;
    width: 320px;
    max-height: 80vh;
    background: white;
    box-shadow: 0 4px 12px rgb(0 0 0 / 0.3);
    border-radius: 8px;
    padding: 15px;
    overflow-y: auto;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    z-index: 1100;
  }
  #cart.active {
    transform: translateX(0);
  }
  #cart h3 {
    margin-top: 0;
    margin-bottom: 15px;
  }
  .cart-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 8px;
  }
  .cart-item span {
    flex: 1;
  }
  .cart-item .remove-btn {
    background: transparent;
    border: none;
    color: #d9534f;
    cursor: pointer;
    font-weight: 700;
  }
  #cart-total {
    font-weight: 700;
    font-size: 1.1rem;
    margin-top: 10px;
    text-align: right;
  }
  #cart-close {
    background: #d9534f;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    float: right;
    margin-bottom: 10px;
  }

  /* Botón flotante para carrito */
  #cart-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #d9534f;
    color: white;
    border: none;
    padding: 15px 20px;
    border-radius: 50px;
    font-size: 1.1rem;
    cursor: pointer;
    box-shadow: 0 4px 12px rgb(0 0 0 / 0.3);
    z-index: 1200;
    transition: background 0.3s ease;
  }
  #cart-btn:hover {
    background: #b7403a;
  }

  /* Modal overlay */
  #modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right:0;
    bottom: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1500;
  }
  #modal-overlay.active {
    display: flex;
  }
  #modal {
    background: white;
    border-radius: 10px;
    max-width: 900px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
    position: relative;
  }
  #modal-close {
    position: absolute;
    top: 15px;
    right: 20px;
    background: #d9534f;
    border: none;
    color: white;
    font-size: 1.2rem;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
  }
  #modal h2 {
    margin-top: 0;
  }
  #modal .modal-content {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }
  #modal .modal-images {
    flex: 1 1 300px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  #modal .modal-images img {
    width: 100%;
    border-radius: 6px;
    object-fit: cover;
    cursor: pointer;
    border: 2px solid transparent;
    transition: border-color 0.3s ease;
  }
  #modal .modal-images img.selected {
    border-color: #d9534f;
  }
  #modal .modal-main-image {
    width: 100%;
    max-height: 400px;
    border-radius: 8px;
    object-fit: contain;
  }
  #modal .modal-details {
    flex: 1 1 300px;
    display: flex;
    flex-direction: column;
  }
  #modal .modal-details p.description {
    flex-grow: 1;
    font-size: 1rem;
    margin-bottom: 15px;
    color: #444;
  }
  #modal .modal-details .precio {
    font-size: 1.5rem;
    font-weight: 700;
    color: #d9534f;
    margin-bottom: 20px;
  }
  #modal .modal-details label {
    font-weight: 700;
    margin-bottom: 8px;
  }
  #modal .modal-details select {
    padding: 8px;
    font-size: 1rem;
    border-radius: 5px;
    border: 1px solid #ccc;
    margin-bottom: 20px;
    max-width: 120px;
  }
  #modal .modal-details button.add-cart {
    width: fit-content;
  }

  @media (max-width: 700px) {
    #modal .modal-content {
      flex-direction: column;
    }
    #modal .modal-images,
    #modal .modal-details {
      flex: none;
      width: 100%;
    }
    #modal .modal-main-image {
      max-height: 250px;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Moda Actual</h1>
  <p>Tienda online de ropa para todos</p>
</header>

<nav>
  <a href="#" class="filter-btn active" data-filter="hombres">Hombres</a>
  <a href="#" class="filter-btn" data-filter="mujeres">Mujeres</a>
  <a href="#" class="filter-btn" data-filter="niños">Niños</a>
  <a href="#" class="filter-btn" data-filter="todos">Todos</a>
</nav>

<div class="container">

  <section id="hombres" class="producto-seccion">
    <h2>Ropa para Hombres</h2>
    <div class="productos">
      <article class="producto" tabindex="0" data-category="hombres" data-name="Camisa Casual Azul" data-price="499" data-description="Camisa de algodón ligera ideal para el día a día, cómoda y fresca." data-images='[
        "https://images.unsplash.com/photo-1521335629791-ce4aec67dd9b?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["S", "M", "L", "XL"]'>
        <img src="https://images.unsplash.com/photo-1521335629791-ce4aec67dd9b?auto=format&fit=crop&w=500&q=60" alt="Camisa casual hombre" />
        <div class="info-producto">
          <h3>Camisa Casual Azul</h3>
          <p>Camisa de algodón ligera ideal para el día a día.</p>
          <div class="precio">$499 MXN</div>
        </div>
      </article>

      <article class="producto" tabindex="0" data-category="hombres" data-name="Chaqueta Negra" data-price="1199" data-description="Chaqueta moderna con cierre y bolsillos laterales, perfecta para otoño e invierno." data-images='[
        "https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["M", "L", "XL"]'>
        <img src="https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=500&q=60" alt="Chaqueta negra hombre" />
        <div class="info-producto">
          <h3>Chaqueta Negra</h3>
          <p>Chaqueta moderna con cierre y bolsillos laterales.</p>
          <div class="precio">$1,199 MXN</div>
        </div>
      </article>

      <article class="producto" tabindex="0" data-category="hombres" data-name="Pantalón Chino Beige" data-price="749" data-description="Comodidad y estilo para cualquier ocasión formal o casual, con ajuste perfecto." data-images='[
        "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1503342452485-8685e0e5a9b9?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["S", "M", "L"]'>
        <img src="https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=500&q=60" alt="Pantalón chino hombre" />
        <div class="info-producto">
          <h3>Pantalón Chino Beige</h3>
          <p>Comodidad y estilo para cualquier ocasión formal o casual.</p>
          <div class="precio">$749 MXN</div>
        </div>
      </article>
    </div>
  </section>

  <section id="mujeres" class="producto-seccion hidden">
    <h2>Ropa para Mujeres</h2>
    <div class="productos">
      <article class="producto" tabindex="0" data-category="mujeres" data-name="Vestido de Verano" data-price="599" data-description="Vestido fresco y colorido para días soleados, con tela ligera y suave." data-images='[
        "https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["S", "M", "L"]'>
        <img src="https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=500&q=60" alt="Vestido verano mujer" />
        <div class="info-producto">
          <h3>Vestido de Verano</h3>
          <p>Vestido fresco y colorido para días soleados.</p>
          <div class="precio">$599 MXN</div>
        </div>
      </article>

      <article class="producto" tabindex="0" data-category="mujeres" data-name="Blusa Blanca Elegante" data-price="499" data-description="Perfecta para oficina o eventos casuales, con diseño clásico y elegante." data-images='[
        "https://images.unsplash.com/photo-1520975917926-dae0528bb6b5?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["S", "M", "L", "XL"]'>
        <img src="https://images.unsplash.com/photo-1520975917926-dae0528bb6b5?auto=format&fit=crop&w=500&q=60" alt="Blusa blanca mujer" />
        <div class="info-producto">
          <h3>Blusa Blanca Elegante</h3>
          <p>Perfecta para oficina o eventos casuales.</p>
          <div class="precio">$499 MXN</div>
        </div>
      </article>

      <article class="producto" tabindex="0" data-category="mujeres" data-name="Jeans Skinny" data-price="699" data-description="Clásico y versátil para cualquier outfit, ajustado y cómodo." data-images='[
        "https://images.unsplash.com/photo-1520975896741-6e0f61c38f4d?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1514996937319-344454492b37?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["28", "30", "32", "34"]'>
        <img src="https://images.unsplash.com/photo-1520975896741-6e0f61c38f4d?auto=format&fit=crop&w=500&q=60" alt="Jeans mujer" />
        <div class="info-producto">
          <h3>Jeans Skinny</h3>
          <p>Clásico y versátil para cualquier outfit.</p>
          <div class="precio">$699 MXN</div>
        </div>
      </article>
    </div>
  </section>

  <section id="niños" class="producto-seccion hidden">
    <h2>Ropa para Niños</h2>
    <div class="productos">
      <article class="producto" tabindex="0" data-category="niños" data-name="Playera Divertida" data-price="299" data-description="Colores vivos y diseño divertido para los más pequeños." data-images='[
        "https://images.unsplash.com/photo-1534126511673-b6899657816a?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1503342452485-8685e0e5a9b9?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["XS", "S", "M"]'>
        <img src="https://images.unsplash.com/photo-1534126511673-b6899657816a?auto=format&fit=crop&w=500&q=60" alt="Playera niños" />
        <div class="info-producto">
          <h3>Playera Divertida</h3>
          <p>Colores vivos y diseño divertido para los más pequeños.</p>
          <div class="precio">$299 MXN</div>
        </div>
      </article>

      <article class="producto" tabindex="0" data-category="niños" data-name="Sudadera con Capucha" data-price="399" data-description="Suave y cálida, ideal para días frescos." data-images='[
        "https://images.unsplash.com/photo-1523264766116-4c3f022f9950?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1504198453319-5ce911bafcde?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["XS", "S", "M", "L"]'>
        <img src="https://images.unsplash.com/photo-1523264766116-4c3f022f9950?auto=format&fit=crop&w=500&q=60" alt="Sudadera niños" />
        <div class="info-producto">
          <h3>Sudadera con Capucha</h3>
          <p>Suave y cálida, ideal para días frescos.</p>
          <div class="precio">$399 MXN</div>
        </div>
      </article>

      <article class="producto" tabindex="0" data-category="niños" data-name="Pantalón Deportivo" data-price="349" data-description="Comodidad y resistencia para actividades al aire libre." data-images='[
        "https://images.unsplash.com/photo-1520975855563-2a345a78788a?auto=format&fit=crop&w=500&q=60",
        "https://images.unsplash.com/photo-1503342452485-8685e0e5a9b9?auto=format&fit=crop&w=500&q=60"
      ]' data-sizes='["XS", "S", "M", "L"]'>
        <img src="https://images.unsplash.com/photo-1520975855563-2a345a78788a?auto=format&fit=crop&w=500&q=60" alt="Pantalón niños" />
        <div class="info-producto">
          <h3>Pantalón Deportivo</h3>
          <p>Comodidad y resistencia para actividades al aire libre.</p>
          <div class="precio">$349 MXN</div>
        </div>
      </article>
    </div>
  </section>

</div>

<button id="cart-btn" aria-label="Abrir carrito">🛒 Carrito (0)</button>

<div id="cart" aria-label="Carrito de compras">
  <button id="cart-close" aria-label="Cerrar carrito">Cerrar ×</button>
  <h3>Tu Carrito</h3>
  <div id="cart-items"></div>
  <div id="cart-total">Total: $0 MXN</div>
</div>

<!-- Modal Producto -->
<div id="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
  <div id="modal">
    <button id="modal-close" aria-label="Cerrar ventana de producto">×</button>
    <h2 id="modal-title"></h2>
    <div class="modal-content">
      <div class="modal-images">
        <img id="modal-main-image" src="" alt="Imagen principal del producto" />
        <div id="modal-thumbnails"></div>
      </div>
      <div class="modal-details">
        <p class="description"></p>
        <div class="precio"></div>
        <label for="size-select">Selecciona la talla:</label>
        <select id="size-select" aria-label="Selecciona la talla">
        </select>
        <button class="add-cart">Agregar al carrito</button>
      </div>
    </div>
  </div>
</div>

<footer>
  &copy; 2025 Moda Actual | Todos los derechos reservados
</footer>

<script>
  // Manejo del filtro de secciones
  const filterButtons = document.querySelectorAll('.filter-btn');
  const sections = document.querySelectorAll('.producto-seccion');

  filterButtons.forEach(btn => {
    btn.addEventListener('click', e => {
      e.preventDefault();
      const filter = btn.dataset.filter;
      filterButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      if(filter === 'todos') {
        sections.forEach(sec => sec.classList.remove('hidden'));
      } else {
        sections.forEach(sec => {
          if(sec.id === filter) {
            sec.classList.remove('hidden');
          } else {
            sec.classList.add('hidden');
          }
        });
      }
    });
  });

  // Carrito
  const cartBtn = document.getElementById('cart-btn');
  const cart = document.getElementById('cart');
  const cartCloseBtn = document.getElementById('cart-close');
  const cartItemsContainer = document.getElementById('cart-items');
  const cartTotalDisplay = document.getElementById('cart-total');

  let cartItems = [];

  function updateCartDisplay() {
    cartItemsContainer.innerHTML = '';
    let total = 0;

    if(cartItems.length === 0) {
      cartItemsContainer.innerHTML = '<p>Tu carrito está vacío.</p>';
      cartTotalDisplay.textContent = 'Total: $0 MXN';
      cartBtn.textContent = `🛒 Carrito (0)`;
      return;
    }

    cartItems.forEach((item, index) => {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'cart-item';

      itemDiv.innerHTML = `
        <span>${item.name} (${item.size}) x${item.quantity}</span>
        <span>$${item.price * item.quantity} MXN</span>
        <button class="remove-btn" data-index="${index}" aria-label="Eliminar ${item.name} del carrito">&times;</button>
      `;
      cartItemsContainer.appendChild(itemDiv);

      total += item.price * item.quantity;
    });

    cartTotalDisplay.textContent = `Total: $${total} MXN`;
    cartBtn.textContent = `🛒 Carrito (${cartItems.reduce((a,b) => a + b.quantity, 0)})`;

    // Añadir evento a botones eliminar
    const removeBtns = cartItemsContainer.querySelectorAll('.remove-btn');
    removeBtns.forEach(btn => {
      btn.addEventListener('click', e => {
        const idx = e.target.dataset.index;
        if (cartItems[idx].quantity > 1) {
          cartItems[idx].quantity--;
        } else {
          cartItems.splice(idx, 1);
        }
        updateCartDisplay();
      });
    });
  }

  function addToCart(name, price, size) {
    const existingIndex = cartItems.findIndex(item => item.name === name && item.size === size);
    if(existingIndex >= 0) {
      cartItems[existingIndex].quantity++;
    } else {
      cartItems.push({ name, price, quantity: 1, size });
    }
    updateCartDisplay();
  }

  cartBtn.addEventListener('click', () => {
    cart.classList.toggle('active');
  });

  cartCloseBtn.addEventListener('click', () => {
    cart.classList.remove('active');
  });

  // Añadir funcionalidad para abrir modal con detalles
  const modalOverlay = document.getElementById('modal-overlay');
  const modalClose = document.getElementById('modal-close');
  const modalTitle = document.getElementById('modal-title');
  const modalMainImage = document.getElementById('modal-main-image');
  const modalThumbnails = document.getElementById('modal-thumbnails');
  const modalDescription = modalOverlay.querySelector('.description');
  const modalPrice = modalOverlay.querySelector('.precio');
  const sizeSelect = document.getElementById('size-select');
  const modalAddCartBtn = modalOverlay.querySelector('.add-cart');

  let currentProduct = null;

  function openModal(product) {
    currentProduct = product;
    modalTitle.textContent = product.dataset.name;
    modalDescription.textContent = product.dataset.description;
    modalPrice.textContent = `$${product.dataset.price} MXN`;

    // Cargar tallas
    const sizes = JSON.parse(product.dataset.sizes);
    sizeSelect.innerHTML = '';
    sizes.forEach(size => {
      const option = document.createElement('option');
      option.value = size;
      option.textContent = size;
      sizeSelect.appendChild(option);
    });

    // Cargar imágenes
    const images = JSON.parse(product.dataset.images);
    modalThumbnails.innerHTML = '';
    modalMainImage.src = images[0];
    modalMainImage.alt = product.dataset.name + ' imagen principal';

    images.forEach((src, i) => {
      const thumb = document.createElement('img');
      thumb.src = src;
      thumb.alt = product.dataset.name + ' imagen ' + (i+1);
      if(i === 0) thumb.classList.add('selected');
      thumb.tabIndex = 0;

      thumb.addEventListener('click', () => {
        modalMainImage.src = src;
        modalThumbnails.querySelectorAll('img').forEach(img => img.classList.remove('selected'));
        thumb.classList.add('selected');
      });

      thumb.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          thumb.click();
        }
      });

      modalThumbnails.appendChild(thumb);
    });

    modalOverlay.classList.add('active');
    sizeSelect.focus();
  }

  modalClose.addEventListener('click', () => {
    modalOverlay.classList.remove('active');
  });

  modalOverlay.addEventListener('click', e => {
    if(e.target === modalOverlay) {
      modalOverlay.classList.remove('active');
    }
  });

  // Abrir modal al click en producto (excepto botón agregar carrito dentro del producto)
  const products = document.querySelectorAll('.producto');
  products.forEach(product => {
    product.addEventListener('click', e => {
      // Si el click es en un botón add-cart dentro del producto, no abrir modal aquí
      if(e.target.classList.contains('add-cart')) return;
      openModal(product);
    });
    // Soporte accesible con teclado (Enter o espacio abre modal)
    product.addEventListener('keydown', e => {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openModal(product);
      }
    });
  });

  // Agregar al carrito desde modal
  modalAddCartBtn.addEventListener('click', () => {
    const selectedSize = sizeSelect.value;
    if(!selectedSize) {
      alert('Por favor selecciona una talla.');
      sizeSelect.focus();
      return;
    }
    addToCart(currentProduct.dataset.name, parseInt(currentProduct.dataset.price, 10), selectedSize);
    modalOverlay.classList.remove('active');
  });

  // Botones agregar al carrito en sección productos (sin modal)
  // Opcional: los dejamos solo para modal, o podemos mantener. Aquí los ocultamos para evitar confusión.
  // document.querySelectorAll('button.add-cart').forEach(btn => btn.style.display = 'none');

  // Carrito inicializado
  updateCartDisplay();

</script>

</body>
</html>
